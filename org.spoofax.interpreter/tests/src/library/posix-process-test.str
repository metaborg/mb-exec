module posix-process-test
imports sunit posix-process posix-signal

strategies

  main = 
    test-suite(!"posix-process-test",
      kill-tests
    )

  kill-tests =
    apply-test(!"kill own process", fork-wait-test(kill-myself), !(), !SIGKILL())

  kill-myself = 
    <kill> (<get-pid>, SIGKILL())

  fork-wait-test(child) =
    fork(child, ?(<waitpid>, t); ?WaitStatus(_, <signal-from-number>, _))