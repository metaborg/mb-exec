module arrayfields-check
imports
  lib
  EclipseJava
  ecj-adapter
  
strategies 

  main = check-array-fields
  
  check-array-fields = topdown(try(check-type-decl))
    
  check-type-decl = 
     ?TypeDeclaration(_, _, _, _, _, body)
    ; where(<map(try(check-field))> body)

  check-field =
      ?FieldDeclaration(_, _, _)
    ; 
    ; type-of => tp
    ; <is-subtype-of(|"java.lang.List")> tp
    ; emit-warn(|"Field is of illegal type List!")
    
